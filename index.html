<!DOCTYPE HTML>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="site.css">
  </head>
  <body>
    <div id="paint">
      <canvas id="CollaborativeCanvas"></canvas>
    </div>
    <script>
      var canvas = document.getElementById('CollaborativeCanvas');
      var context = canvas.getContext('2d');

      var painting = document.getElementById('paint');
      var paint_style = getComputedStyle(painting);
      canvas.width = parseInt(paint_style.getPropertyValue('width'));
      canvas.height = parseInt(paint_style.getPropertyValue('height'));

      var mouse = {x: 0, y: 0};

      canvas.addEventListener('mousemove', function(e) {
        mouse.x = e.pageX - this.offsetLeft;
        mouse.y = e.pageY - this.offsetTop;
      }, false);

      context.lineWidth = 3;
      context.lineJoin = 'round';
      context.lineCap = 'round';
      context.strokeStyle = '#00CC99';

      canvas.addEventListener('mousedown', function(e) {
        context.beginPath();
        context.moveTo(mouse.x, mouse.y);

        canvas.addEventListener('mousemove', onPaint, false);
      }, false);

      canvas.addEventListener('mouseup', function() {
        canvas.removeEventListener('mousemove', onPaint, false);
      }, false);

      var onPaint = function() {
        context.lineTo(mouse.x, mouse.y);
        context.stroke();
      };
    </script>
  </body>
</html>
